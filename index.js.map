{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["/**\n * PROJECT: orbix-meter.blog\n * ENGINE: GSAP, Lenis, SplitType, Lucide\n */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    \n    // --- 1. ИНИЦИАЛИЗАЦИЯ ИКОНОК ---\n    if (typeof lucide !== 'undefined') {\n        lucide.createIcons();\n    }\n\n    // --- 2. ПЛАВНЫЙ СКРОЛЛ (LENIS) ---\n    const lenis = new Lenis({\n        duration: 1.2,\n        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n        orientation: 'vertical',\n        smoothWheel: true,\n    });\n\n    function raf(time) {\n        lenis.raf(time);\n        requestAnimationFrame(raf);\n    }\n    requestAnimationFrame(raf);\n\n    // --- 3. МОБИЛЬНОЕ МЕНЮ ---\n    const burger = document.querySelector('.burger');\n    const mobileMenu = document.querySelector('.mobile-menu');\n    const body = document.body;\n\n    if (burger && mobileMenu) {\n        burger.addEventListener('click', () => {\n            const isActive = mobileMenu.classList.toggle('mobile-menu--active');\n            // Анимация иконки бургера (опционально)\n            burger.style.transform = isActive ? 'rotate(90deg)' : 'rotate(0deg)';\n            body.style.overflow = isActive ? 'hidden' : ''; // Блокировка скролла\n        });\n\n        // Закрытие меню при клике на ссылку\n        document.querySelectorAll('.mobile-menu__link').forEach(link => {\n            link.addEventListener('click', () => {\n                mobileMenu.classList.remove('mobile-menu--active');\n                burger.style.transform = 'rotate(0deg)';\n                body.style.overflow = '';\n            });\n        });\n    }\n\n    // --- 4. GSAP АНИМАЦИИ (HERO + SCROLL) ---\n    gsap.registerPlugin(ScrollTrigger);\n\n    // Анимация заголовка Hero (без разрыва слов)\n    const heroTitleElement = document.querySelector('#hero-title');\n    if (heroTitleElement) {\n        // Разбиваем на слова и символы. 'words' гарантирует, что слова не разорвутся.\n        const text = new SplitType(heroTitleElement, { \n            types: 'words, chars',\n            tagName: 'span' \n        });\n\n        gsap.from(text.chars, {\n            opacity: 0,\n            y: 80,\n            rotate: 15,\n            scale: 0.8,\n            stagger: 0.03,\n            duration: 1.2,\n            ease: \"expo.out\",\n            clearProps: \"all\" \n        });\n    }\n\n    // Появление секций при скролле\n    const revealElements = document.querySelectorAll('.section-title, .benefit-card, .blog-item, .anti-grid__item');\n    revealElements.forEach((el) => {\n        gsap.from(el, {\n            scrollTrigger: {\n                trigger: el,\n                start: \"top 85%\",\n                toggleActions: \"play none none none\"\n            },\n            opacity: 0,\n            y: 40,\n            duration: 1,\n            ease: \"power2.out\"\n        });\n    });\n\n    // Интерактив для карточек (микродвижение)\n    document.querySelectorAll('.benefit-card').forEach(card => {\n        card.addEventListener('mouseenter', () => {\n            gsap.to(card, { backgroundColor: '#262a1f', duration: 0.3 });\n        });\n        card.addEventListener('mouseleave', () => {\n            gsap.to(card, { backgroundColor: 'transparent', duration: 0.3 });\n        });\n    });\n\n    // --- 5. ЛОГИКА ФОРМЫ (ВАЛИДАЦИЯ + КАПЧА) ---\n    const form = document.getElementById('main-form');\n    if (form) {\n        const phoneInput = document.getElementById('phone-input');\n        const captchaLabel = document.getElementById('captcha-label');\n        const captchaInput = document.getElementById('captcha-input');\n        const successMsg = document.getElementById('form-success');\n\n        // Генерация капчи\n        const val1 = Math.floor(Math.random() * 10) + 1;\n        const val2 = Math.floor(Math.random() * 10) + 1;\n        const correctSum = val1 + val2;\n        \n        if (captchaLabel) {\n            captchaLabel.innerText = `Подтвердите, что вы не робот: ${val1} + ${val2} = ?`;\n        }\n\n        // Только цифры в телефоне\n        phoneInput.addEventListener('input', (e) => {\n            e.target.value = e.target.value.replace(/[^0-9+]/g, '');\n        });\n\n        form.addEventListener('submit', (e) => {\n            e.preventDefault();\n            \n            // Проверка капчи\n            if (parseInt(captchaInput.value) !== correctSum) {\n                captchaInput.style.borderColor = '#ff4b4b';\n                alert('Ошибка: Неверный результат вычисления.');\n                return;\n            }\n\n            // Имитация отправки\n            const submitBtn = form.querySelector('button[type=\"submit\"]');\n            const originalBtnText = submitBtn.innerText;\n            \n            submitBtn.disabled = true;\n            submitBtn.innerText = 'ОТПРАВКА...';\n\n            setTimeout(() => {\n                form.reset();\n                submitBtn.innerText = originalBtnText;\n                submitBtn.disabled = false;\n                \n                if (successMsg) {\n                    successMsg.style.display = 'block';\n                    // Скрыть через 5 секунд\n                    setTimeout(() => { successMsg.style.display = 'none'; }, 5000);\n                }\n            }, 1500);\n        });\n    }\n\n    // --- 6. COOKIE POPUP ---\n    const cookiePopup = document.getElementById('cookie-popup');\n    const cookieAccept = document.getElementById('cookie-accept');\n\n    if (cookiePopup && !localStorage.getItem('orbix_cookies_accepted')) {\n        setTimeout(() => {\n            cookiePopup.style.display = 'flex';\n            gsap.from(cookiePopup, { y: 100, opacity: 0, duration: 0.6 });\n        }, 3000);\n    }\n\n    if (cookieAccept) {\n        cookieAccept.addEventListener('click', () => {\n            localStorage.setItem('orbix_cookies_accepted', 'true');\n            gsap.to(cookiePopup, { \n                y: 100, \n                opacity: 0, \n                duration: 0.4, \n                onComplete: () => { cookiePopup.style.display = 'none'; } \n            });\n        });\n    }\n\n    // --- 7. ЭФФЕКТ СКРОЛЛА ХЕДЕРА ---\n    window.addEventListener('scroll', () => {\n        const header = document.querySelector('.header');\n        if (window.scrollY > 100) {\n            header.style.padding = '12px 0';\n            header.style.backgroundColor = 'rgba(26, 28, 21, 0.95)';\n        } else {\n            header.style.padding = '24px 0';\n            header.style.backgroundColor = 'rgba(26, 28, 21, 0.9)';\n        }\n    });\n\n});\n\nconsole.log(\"%c Orbix-Meter %c System Online \", \"background: #d4ff3f; color: #1a1c15; font-weight: bold;\", \"background: #262a1f; color: #fff;\");"],"names":["lenis","t","raf","time","burger","mobileMenu","body","isActive","link","heroTitleElement","text","el","card","form","phoneInput","captchaLabel","captchaInput","successMsg","val1","val2","correctSum","e","submitBtn","originalBtnText","cookiePopup","cookieAccept","header"],"mappings":"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"}